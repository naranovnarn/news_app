(this["webpackJsonpnew-app"]=this["webpackJsonpnew-app"]||[]).push([[0],{131:function(e,t,n){e.exports=n(431)},136:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},430:function(e,t,n){},431:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(55),s=n.n(i),o=(n(136),n(10)),c=n(11),l=n(13),u=n(12),p=n(47),m=n(3),d=n(38),f=n(5),h=n(58),v=n(4);function O(e,t){return Object(v.a)(Object(v.a)({},e),{},{isOpenPopUp:!0})}function b(e,t){return Object(v.a)(Object(v.a)({},e),{},{isOpenPopUp:!1,user:{login:"guest"},authorized:!1})}function E(e,t){var n=t.user;return n?(localStorage.setItem("authUser",JSON.stringify(n)),Object(v.a)(Object(v.a)({},e),{},{isOpenPopUp:!1,user:n,authorized:!0})):Object(v.a)(Object(v.a)({},e),{},{isOpenPopUp:!1,authorized:!1})}function g(e,t){return Object(v.a)(Object(v.a)({},e),{},{isOpenPopUp:!1})}function j(e,t){var n=t;n.id=+new Date;var a=e.newsList;a.push(n);var r=Object(v.a)(Object(v.a)({},e),{},{newsList:Object(h.a)(a)});return localStorage.setItem("newsList",JSON.stringify(a)),r}function N(e,t){return Object(v.a)(Object(v.a)({},e),{},{newsList:t})}function _(e,t){var n=t.id,a=e.newsList,r=a.map((function(e){return e.id})).indexOf(n);if(-1!==r){a.splice(r,1);var i=Object(v.a)(Object(v.a)({},e),{},{newsList:Object(h.a)(a)});return localStorage.setItem("newsList",JSON.stringify(a)),i}}function y(e,t){var n=t.id,a=e.newsList;a.find((function(e){return e.id===n})).isApproved=!0;var r=Object(v.a)(Object(v.a)({},e),{},{newsList:Object(h.a)(a)});return localStorage.setItem("newsList",JSON.stringify(a)),r}function w(e,t){var n=t.filterNewsList,a=t.text;return Object(v.a)(Object(v.a)({},e),{},{filterNewsList:n,term:a})}var L={isOpenPopUp:!1,user:{login:"guest"},authorized:!1,newsList:[],filterNewsList:[],term:""},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"LOG_IN":return O(e);case"STOP_LOG_IN":return g(e);case"LOG_IN_SUCCESS":return E(e,a);case"LOG_OUT":return b(e);case"CREATE_NEWS":return j(e,a);case"GET_DATA_LOCAL":return N(e,a);case"DELETE_ITEM":return _(e,a);case"APPROVE_ITEM":return y(e,a);case"FILTER_NEWS":return w(e,a);default:return e}},C=n(57),I=(n(141),function(e){var t=e.inputType,n=void 0===t?"text":t,a=e.label,i=e.value,s=e.onChange,o=e.errorMessage,c=["Input"];e.isValid&&c.push("invalid");var l="".concat(n," - ").concat(Math.random());return r.a.createElement("div",{className:c.join(" ")},r.a.createElement("label",{htmlFor:l},a),r.a.createElement("input",{type:n,id:l,value:i,onChange:s}),r.a.createElement("span",null,o))}),A=(n(142),function(e){var t=e.type,n=e.onClick,a=e.disabled,i=["Button ",t];return r.a.createElement("button",{onClick:n,className:i.join(""),disabled:a},e.children)});function k(e){return{type:"LOG_IN_SUCCESS",payload:{user:e}}}n(143);var T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={tryLogIn:!1,login:"",password:""},e.loginHandler=function(){var t={login:"admin",password:"admin",role:"admin"},n={login:"user",password:"user",role:"user"},a=e.state,r=a.login,i=a.password;r===t.login&&i===t.password&&e.props.log_in_success(t),r===n.login&&i===n.password&&e.props.log_in_success(n),e.setState({tryLogIn:!0})},e.submitHandler=function(e){e.preventDefault()},e.onChangeHandler=function(t,n){e.setState(Object(C.a)({},n,t.target.value))},e.stopLogin=function(){e.props.stop_log_in()},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Auth"},r.a.createElement("h1",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement(I,{label:"Login",onChange:function(t){return e.onChangeHandler(t,"login")},errorMessage:this.state.tryLogIn?"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435":null,isValid:this.state.tryLogIn}),r.a.createElement(I,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(t){return e.onChangeHandler(t,"password")},errorMessage:this.state.tryLogIn?"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435":null,isValid:this.state.tryLogIn}),r.a.createElement(A,{type:"primary",onClick:this.loginHandler},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(A,{type:"primary",onClick:this.stopLogin},"\u041e\u0442\u043c\u0435\u043d\u0430")))}}]),n}(r.a.Component),P=Object(f.b)((function(e){return{isOpenPopUp:e.isOpenPopUp}}),(function(e){return{log_in_success:function(t){e(k(t))},stop_log_in:function(){e({type:"STOP_LOG_IN"})}}}))(T),x=(n(144),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).openModal=function(){e.props.authorized?e.props.log_out():e.props.log_in()},e.closeModal=function(t){t.target===t.currentTarget&&e.props.stop_log_in()},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpenPopUp,n=e.authorized;return r.a.createElement("div",{className:"PopUpAuth"},r.a.createElement(A,{type:"primary",onClick:this.openModal}," ",n?"\u0412\u044b\u0439\u0442\u0438":"\u0412\u0445\u043e\u0434","  "),t&&r.a.createElement("section",{className:"back-panel",onClick:this.closeModal},r.a.createElement("div",{className:"dialog-container"},r.a.createElement(P,null))))}}]),n}(r.a.Component)),U=Object(f.b)((function(e){return{isOpenPopUp:e.isOpenPopUp,authorized:e.authorized}}),(function(e){return{log_in:function(){e({type:"LOG_IN"})},stop_log_in:function(){e({type:"STOP_LOG_IN"})},log_out:function(){e({type:"LOG_OUT"})}}}))(x);n(145);var H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.log_in_success(JSON.parse(localStorage.getItem("authUser"))),this.props.newsList.length||this.props.get_data_local(JSON.parse(localStorage.getItem("newsList"))||[])}},{key:"render",value:function(){return r.a.createElement("header",{className:"Navbar"},r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark"},r.a.createElement("ul",{className:"navbar-nav "},r.a.createElement("li",{className:"navbar item"},r.a.createElement(p.b,{exact:!0,to:"/",className:"nav-link"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),r.a.createElement("li",{className:"navbar item"},r.a.createElement(p.b,{to:"/news/",className:"nav-link"},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")),r.a.createElement("li",{className:"navbar item"},r.a.createElement(U,null)))))}}]),n}(r.a.Component),M=Object(f.b)((function(e){return{newsList:e.newsList,filterNewsList:e.filterNewsList,term:e.term}}),(function(e){return{log_in_success:function(t){e(k(t))},get_data_local:function(t){e(function(e){return{type:"GET_DATA_LOCAL",payload:e}}(t))}}}))(H),D=(n(147),Object(f.b)((function(e){return{newsList:e.newsList}}),(function(e){return{filter_news:function(t,n){e(function(e,t){return{type:"FILTER_NEWS",payload:{filterNewsList:e,text:t}}}(t,n))}}}))((function(e){return r.a.createElement("div",{className:"SearchPanel"},r.a.createElement("nav",{className:"navbar navbar-light bg-light"},r.a.createElement("form",{className:"form-inline",onSubmit:function(e){e.preventDefault()}},r.a.createElement("input",{className:"form-control mr-sm-1",type:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u043c","aria-label":"Search",onChange:function(t){var n,a;e.filter_news((n=e.newsList,0==(a=t.target.value).length?n:n.filter((function(e){return e.text.indexOf(a)>-1}))),t.target.value)}}))))}))),G=(n(148),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).cls=["list-group-item list-group-item-action "],e.deleteHandler=function(t){e.props.deleteItem(t)},e.approveHandler=function(t){e.props.approveItem(t)},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return this.props.isApproved||this.cls.includes("draft")||this.cls.push("draft"),this.props.isApproved&&this.cls.includes("draft")&&this.cls.pop(),r.a.createElement("div",{className:"NewsItemList"},r.a.createElement("div",{className:this.cls.join(" ")},r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{className:"mb-1"},this.props.name),r.a.createElement("small",null,this.props.data)),r.a.createElement("p",{className:"mb-1"},this.props.text),"admin"!==this.props.user.role||this.props.isApproved?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{type:"success",onClick:function(){return e.approveHandler(e.props.id)}},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"),r.a.createElement(A,{type:"error",onClick:function(){return e.deleteHandler(e.props.id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),this.props.isApproved?r.a.createElement("small",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e"):r.a.createElement("small",null,"\u041d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0438")))}}]),n}(r.a.Component)),z=Object(f.b)((function(e){return{isOpenPopUp:e.isOpenPopUp,user:e.user}}),(function(e){return{deleteItem:function(t){e(function(e){return{type:"DELETE_ITEM",payload:{id:e}}}(t))},approveItem:function(t){e(function(e){return{type:"APPROVE_ITEM",payload:{id:e}}}(t))}}}))(G),J=(n(149),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.newsList||[];return this.props.term.length>0&&(e=this.props.filterNewsList),console.log(this.props.user.login),r.a.createElement("div",{className:"NewsItem"},r.a.createElement("div",{className:"list-group"},r.a.createElement("ul",null,"guest"===this.props.user.login?e.filter((function(e,t){return 1==e.isApproved})).map((function(e,t){return r.a.createElement("li",{key:e.id},r.a.createElement(z,{key:e.id,name:e.name,text:e.text,data:e.data,isApproved:e.isApproved,id:e.id}))})):e.map((function(e,t){return r.a.createElement("li",{key:e.id},r.a.createElement(z,{key:e.id,name:e.name,text:e.text,data:e.data,isApproved:e.isApproved,id:e.id}))})))))}}]),n}(r.a.Component)),R=Object(f.b)((function(e){return{newsList:e.newsList,filterNewsList:e.filterNewsList,term:e.term,user:e.user}}))(J),V=(n(150),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={name:"",text:"",data:"",isApproved:!1},e.onChangeNameHandler=function(t){var n=(new Date).toLocaleDateString();e.setState({name:t.target.value,data:n})},e.onChangeTextHandler=function(t){e.setState({text:t.target.value})},e.submitHandler=function(e){e.preventDefault()},e.createNewHandler=function(){var t=e.state;e.props.create_news(t),e.setState({name:"",text:"",data:"",id:"",isApproved:!1})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.text;return r.a.createElement("div",{className:"CreateNews"},r.a.createElement("h3",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"),r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement(I,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:this.onChangeNameHandler,value:t}),r.a.createElement(I,{label:"\u0422\u0435\u043a\u0441\u0442",onChange:this.onChangeTextHandler,value:n}),r.a.createElement(A,{type:"primary",onClick:this.createNewHandler},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c")))}}]),n}(r.a.Component)),F=Object(f.b)(null,(function(e){return{create_news:function(t){e(function(e){return{type:"CREATE_NEWS",payload:e}}(t))}}}))(V),W=(n(151),Object(f.b)((function(e){return{role:e.user.role}}))((function(e){var t=e.role;return r.a.createElement("div",{className:"News"},r.a.createElement(D,null),r.a.createElement(R,null),"user"===t?r.a.createElement(F,null):null)}))),X=(n(152),n(153),n(430),Object(f.b)((function(e){return{authorized:e.authorized,user:e.user}}))((function(e){return r.a.createElement("div",{className:"Main"},r.a.createElement("div",{className:"jumbotron jumbotron-fluid"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-4"},"\u041f\u0440\u0438\u0432\u0435\u0442, ",e.user.login," "))))}))),B=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):d.c)(Object(d.a)()),q=Object(d.d)(S,B),K=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(f.a,{store:q},r.a.createElement(p.a,null,r.a.createElement(M,null),r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",component:X}),r.a.createElement(m.a,{path:"/news/",component:W}))))}}]),n}(r.a.Component);s.a.render(r.a.createElement(K,null),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.2e9b6e57.chunk.js.map